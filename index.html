<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Transmit Security</title>
<style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        background-color: #f9f9f9;
        padding: 20px;
        max-width: 800px;
        margin: auto;
    }

    h1, h2 {
        text-align: center;
        color: #333;
    }

    /* Tabs */
    .tabs {
        display: flex;
        justify-content: space-around;
        background-color: #ffffff;
        border: 1px solid #d1d1d6;
        border-radius: 12px;
        margin-bottom: 20px;
        overflow: hidden;
        border: 1px solid #f0f0f0;
    }

    .tab {
        flex: 1;
        padding: 12px 0;
        text-align: center;
        color: #007aff;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: color 0.2s;
        border-bottom: 2px solid transparent;
        border-right: 1px solid #f0f0f0;
    }

    .tab.active {
        color: #007aff;
        font-weight: 600;
        border-bottom: 2px solid #007aff;
    }

    .tab:hover {
        color: #0056b3;
    }

    /* Tab Content */
    .tab-content {
        display: none;
        background-color: #ffffff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .tab-content.active {
        display: block;
    }

    .app-container {
        margin-bottom: 20px;
    }

    .app-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .app-title {
        font-size: 1.2em;
        font-weight: bold;
        color: #333;
    }

    .app-version {
        color: #666;
        font-size: 0.9em;
    }

    .app-description {
        margin: 10px 0;
        color: #555;
    }

    /* Install Button */
    .download-button {
        display: inline-block;
        padding: 10px 30px;
        color: #007aff;
        font-weight: bold;
        font-size: 16px;
        text-align: center;
        text-decoration: none;
        border-radius: 12px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border: 1px solid #c7c7cc;
        transition: background-color 0.2s, box-shadow 0.2s;
        margin-top: 15px;
    }

    .download-button:hover {
        background-color: #f0f0f5;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
</style>
</head>
<body>

<h1>Transmit Security</h1>
<h2>iOS Demo Apps</h2>

<!-- Tabs -->
<div class="tabs">
    <div class="tab active" onclick="openTab(event, 'ido')">IDO</div>
    <div class="tab" onclick="openTab(event, 'idv')">IDV</div>
    <div class="tab" onclick="openTab(event, 'drs')">DRS</div>
    <div class="tab" onclick="openTab(event, 'authentication')">Auth</div>
</div>

<!-- IDO Tab Content -->
<div id="ido" class="tab-content active">
    <div class="app-container">
        <div class="app-header">
            <span class="app-title">IDO RASP Demo App</span>
            <span id="ido-version" class="app-version">Version: 1.0.0</span>
        </div>
        <p class="app-description">Showcases the capabilities of Runtime Application Self-Protection (RASP) for iOS applications.</p>
        <a href="itms-services://?action=download-manifest&amp;url=https://transmitsecurity.github.io/ios-demo-apps/Apps/IDO/RASP/manifest.plist" class="download-button">Install App</a>
    </div>
</div>

<!-- IDV Tab Content -->
<div id="idv" class="tab-content">
    <div class="app-container">
        <div class="app-header">
            <span class="app-title">IDV Demo App</span>
            <span id="idv-version" class="app-version">Version: 1.0.0</span>
        </div>
        <p class="app-description">Showcases the capabilities of IDV SDK.</p>
        <a href="itms-services://?action=download-manifest&amp;url=https://transmitsecurity.github.io/ios-demo-apps/Apps/IDV/manifest.plist" class="download-button">Install App</a>
    </div>
</div>

<!-- DRS Tab Content -->
<div id="drs" class="tab-content">
    <div class="app-container">
        <div class="app-header">
            <span class="app-title">DRS Demo App</span>
            <span id="drs-version" class="app-version">Version: 1.0.0</span>
        </div>
        <p class="app-description">Showcases the capabilities of DRS SDK.</p>
        <a href="itms-services://?action=download-manifest&amp;url=https://transmitsecurity.github.io/ios-demo-apps/Apps/DRS/manifest.plist" class="download-button">Install App</a>
    </div>
</div>

<!-- Authentication Tab Content -->
<div id="authentication" class="tab-content">
    <div class="app-container">
        <div class="app-header">
            <span class="app-title">Authentication Demo App</span>
            <span id="authentication-version" class="app-version">Version: 1.0.0</span>
        </div>
        <p class="app-description">Showcases the capabilities of Authentication SDK.</p>
        <a href="itms-services://?action=download-manifest&amp;url=https://transmitsecurity.github.io/ios-demo-apps/Apps/Authentication/manifest.plist" class="download-button">Install App</a>
    </div>
</div>

<script>
    function openTab(event, tabName) {
        const tabContents = document.querySelectorAll('.tab-content');
        tabContents.forEach(content => content.classList.remove('active'));

        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => tab.classList.remove('active'));

        document.getElementById(tabName).classList.add('active');
        event.currentTarget.classList.add('active');
    }
</script>

<!-- JavaScript Code -->
<script>
    // Function to extract the bundle version from the manifest file and update the HTML
    function updateAppVersion(manifestUrl, versionElementId) {
        fetch(manifestUrl)
            .then(response => {
                if (!response.ok) {
                    console.error(`Failed to fetch manifest: ${manifestUrl}`);
                    return;
                }
                return response.text();
            })
            .then(xmlText => {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlText, "application/xml");

                // Find the <key>bundle-version</key> value
                const keys = xmlDoc.getElementsByTagName("key");
                let version = "Unknown";

                for (let i = 0; i < keys.length; i++) {
                    if (keys[i].textContent === "bundle-version") {
                        const versionNode = keys[i].nextElementSibling;
                        if (versionNode && versionNode.tagName === "string") {
                            version = versionNode.textContent;
                        }
                        break;
                    }
                }

                // Update the HTML element with the extracted version
                const versionElement = document.getElementById(versionElementId);
                if (versionElement) {
                    versionElement.textContent = `Version: ${version}`;
                }
            })
            .catch(error => {
                console.error(`Error parsing manifest XML: ${error}`);
            });
    }

    // Call the updateAppVersion function for each app after the page has loaded
    document.addEventListener("DOMContentLoaded", () => {
        updateAppVersion("https://transmitsecurity.github.io/ios-demo-apps/Apps/IDO/RASP/manifest.plist", "ido-version");
        updateAppVersion("https://transmitsecurity.github.io/ios-demo-apps/Apps/IDV/manifest.plist", "idv-version");
        updateAppVersion("https://transmitsecurity.github.io/ios-demo-apps/Apps/DRS/manifest.plist", "drs-version");
        updateAppVersion("https://transmitsecurity.github.io/ios-demo-apps/Apps/Authentication/manifest.plist", "authentication-version");
    });
</script>
    
</body>
</html>
